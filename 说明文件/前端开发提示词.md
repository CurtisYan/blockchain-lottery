链上抽签应用前端开发提示词
请根据以下要求，使用 TypeScript、React 和 ethers.js 为一个基础版的链上抽签应用生成网页端前端代码。

项目目标：

创建一个现代化、简洁且具有良好用户体验的网页应用，用户可以通过连接钱包，查看已有的抽奖列表，发起新的抽奖，参与抽奖，以及在抽奖结束后，发起人可以开奖，中奖者可以领奖。

技术栈要求：

核心语言/框架： TypeScript, React

区块链交互库： ethers.js (v6 或更高版本)

UI/样式： 使用现代 CSS 框架或库（如 Tailwind CSS, Styled Components, 或 Ant Design/MUI 等组件库）来实现现代化、简洁且高级的页面风格。

动画： 集成优秀的动画效果，提升用户体验。

状态管理： 考虑使用 React Context API 或 Zustand 等轻量级状态管理方案来管理应用状态（如钱包连接状态、抽奖列表数据、当前抽奖详情等）。

构建工具： 使用 Vite 或 Create React App (如果 Hardhat 初始化时选择了它)。

与后端智能合约的适配细节：

你的前端应用需要与已部署在 Moonbase Alpha 测试网上的两个 Solidity 智能合约进行交互：

LotteryFactory 合约 (主合约):

作用： 负责创建和管理所有抽奖场次。

地址： 你需要从环境变量 (.env 文件) 中获取已部署的 LotteryFactory 合约地址。例如：VITE_LOTTERY_FACTORY_ADDRESS。请确保前端能够正确读取这个环境变量。

ABI： 你需要使用 Hardhat 编译后生成的 LotteryFactory 合约的 ABI (位于 Hardhat 项目的 artifacts/.../LotteryFactory.json 文件中)。将此 ABI 文件复制到前端项目，并在代码中导入使用。请注意： ABI 是一个 JSON 对象，你在导入后需要使用 LotteryFactoryABI.abi 来获取实际的 ABI 数组。

核心交互函数：

createLottery(string memory _lotteryId, string memory _lotteryName, uint256 _entryFee, uint256 _drawTime): 调用此函数发起新的抽奖。

用户需要提供抽奖 ID (字符串)、名称 (字符串)、入场费 (uint256)、开奖时间戳 (uint256)。

ID 唯一性检查： 在用户提交发起抽奖表单之前，前端应先调用 getLotteryInstanceAddress(string memory _lotteryId) 函数，检查用户输入的 _lotteryId 是否已存在。如果返回的地址不是 address(0) (即 ethers.ZeroAddress)，则提示用户该 ID 已被占用，要求更换。

入场费单位： 用户在前端输入入场费时，通常是以 ETH 或其他用户友好单位。在调用合约时，需要将用户输入的金额转换为合约期望的单位，即 Wei。使用 ethers.js 的 ethers.parseEther("用户输入的ETH数量") 或 ethers.parseUnits("用户输入的数量", "单位") 方法进行转换。

开奖时间戳： 用户在前端选择开奖时间时，通常是日期和时间。需要将这个日期时间转换为以秒为单位的 Unix 时间戳 (uint256)。确保开奖时间戳大于当前的区块时间戳 (block.timestamp)，合约中有相应的 require 检查。

初始奖池 (如果需要)： 如果采用发起人预设奖池模式，前端需要在调用 createLottery 时，通过 ethers.js 的 value 选项向合约转入指定金额的 ETH。例如：lotteryFactoryContract.createLottery(..., { value: ethers.parseEther("初始奖池金额") })。

调用时处理交易签名和发送，显示加载状态，并捕获可能的错误（如 ID 已存在、时间无效、入场费为负数等）。

getAllLotteryIds() public view returns (string[] memory): 调用此函数获取所有已创建抽奖的 ID 列表。前端应在主页加载时调用此函数，并处理返回的字符串数组。

getLotteryInstanceAddress(string memory _lotteryId) public view returns (address): 根据抽奖 ID 获取对应的 SimpleLottery 合约地址。前端在用户点击某个抽奖列表项或输入 ID 查询时调用此函数。如果返回地址为 address(0)，表示该 ID 不存在，前端应提示用户。

SimpleLottery 合约 (抽奖实例合约):

作用： 代表一个独立的抽奖场次，包含该场次的具体逻辑和状态。

地址： 通过调用 LotteryFactory 的 getLotteryInstanceAddress 函数获取。前端需要存储当前查看的抽奖场次的 SimpleLottery 合约地址。

ABI： 你需要使用 Hardhat 编译后生成的 SimpleLottery 合约的 ABI (位于 Hardhat 项目的 artifacts/.../SimpleLottery.json 文件中)。将此 ABI 文件复制到前端项目，并在代码中导入使用。请注意： 同样需要使用 SimpleLotteryABI.abi 获取 ABI 数组。

核心交互函数：

enter() public payable: 调用此函数参与抽奖。前端需要根据该场次的 entryFee (通过调用 entryFee() view 函数获取)，引导用户支付相应金额的代币。调用时需要向合约发送等于 entryFee 的 value。注意单位转换：ethers.parseUnits(entryFee.toString(), "wei") 或直接使用获取到的 entryFee (它已经是 Wei 单位)。

drawWinner() public onlyOwner: 调用此函数触发开奖。前端需要检查当前连接的钱包地址是否是该场次的 Owner (调用 owner() view 函数获取 Owner 地址，与 signer.getAddress() 比较)。如果是，显示开奖按钮。调用时处理交易签名和发送。

claimPrize() public: 调用此函数领取奖金。前端需要检查当前连接的钱包地址是否是该场次的中奖者 (调用 winner() view 函数获取 Winner 地址，与 signer.getAddress() 比较)。如果是，显示领奖按钮。调用时处理交易签名和发送。

View 函数 (查询状态和信息)：

lotteryName(), entryFee(), drawTime(), currentLotteryState(), getParticipants(), getWinner(), getPrizePool(), owner(): 前端需要调用这些 view 函数来获取并显示抽奖的实时信息。注意单位转换：entryFee() 和 getPrizePool() 返回的是 Wei 单位，前端显示时需要转换为用户友好的单位 (如 ETH)，使用 ethers.formatEther(amountInWei) 或 ethers.formatUnits(amountInWei, "单位")。drawTime() 返回的是时间戳，前端需要将其格式化为可读的日期时间字符串。currentLotteryState() 返回的是枚举的数字值 (0-3)，前端需要将其映射到对应的状态字符串 ("Open", "Drawing", "Claimable", "Closed")。

事件监听： 监听 SimpleLottery 合约发出的事件 (EnteredLottery, WinnerDrawn, PrizeClaimed, LotteryStateChanged)。在事件触发时，前端应更新相关的 UI 组件，例如参与者列表、中奖者显示、奖池金额、抽奖状态等。

前端功能要求 (基础版 - 补充细节)：

钱包连接： 使用 ethers.BrowserProvider(window.ethereum) 连接 MetaMask。监听 accountsChanged 和 chainChanged 事件，在用户切换账户或网络时更新应用状态和界面。

主页 (抽奖列表)：

加载状态：在获取抽奖 ID 列表和每个抽奖详情时，显示加载指示器。

错误处理：如果获取列表或详情失败，显示错误信息。

列表项设计：每个列表项应清晰展示抽奖名称、ID、入场费、开奖时间（格式化后）、当前奖池（格式化后）、当前状态。

发起抽奖页面：

表单验证：对用户输入进行基本验证（非空、数字格式等）。

ID 唯一性检查：在用户输入 ID 后或提交表单前，进行异步检查并实时反馈 ID 是否可用。

开奖时间输入：提供日期时间选择器，并转换为 Unix 时间戳。

交易状态：在发送 createLottery 交易后，显示“等待确认...”等状态，交易确认后显示成功或失败。

抽奖详情页面：

动态 UI：根据 currentLotteryState、当前连接的钱包地址 (signer.getAddress())、抽奖发起人 (owner()) 和中奖者 (winner())，动态显示或隐藏“参与”、“开奖”、“领奖”等按钮。

参与者列表：显示 getParticipants() 返回的地址列表。

倒计时：如果抽奖状态为 Open 且未到开奖时间，显示到开奖时间的倒计时。

开奖时间到期处理：当当前时间达到或超过 drawTime 时，即使状态还是 Open，前端也应该提示“等待发起人开奖”或类似信息，并禁用参与功能。

错误处理和用户反馈 (补充)：

解析合约错误信息： Hardhat 和 ethers.js 在交易失败时，可以捕获合约中 require 或 revert 返回的错误字符串。前端需要能够解析这些错误，并以用户友好的中文提示显示给用户。例如，如果合约返回 unicode"支付的入场费不正确"，前端应显示“支付的入场费不正确”。

交易确认提示：在交易发送后，提示用户在钱包中确认，并在链上确认后给予成功提示。

UI/UX 要求 (补充)：

加载动画： 在数据加载和交易处理时，使用平滑的加载动画。

按钮状态： 按钮应根据是否可点击（例如，未连接钱包、状态不允许、非所有者等）显示不同的样式或禁用状态。

夜间模式实现： 使用 CSS 变量或主题切换库来实现夜间模式，确保所有 UI 元素在两种模式下都清晰可读。

代码质量要求 (补充)：

将与 ethers.js 交互的逻辑封装在自定义 Hook 或单独的 API 服务中，避免在组件中直接进行复杂的链上操作。

使用 React 的状态管理方案（Context API 或 Zustand）来管理全局状态（如钱包连接、当前网络），避免 props drilling。
